 <style>
    body {
      background-color: #f8f9fa;
      font-family: Helvetica, sans-serif;
    }
  </style>
<body>

<div class="container mt-5">
  <div class="row justify-content-center">
    <%= render 'posts/sidebar' %>
    <div class="col-md-8">
      <div class="user-info-container mb-5">
        <% if user_signed_in? %>
        <h1 class="text-center mb-4 user-info"><%= render 'posts/new_posts', post: @post %></h1>
        <% end %>
        <div class="d-flex justify-content-center user-info-row">
          <%= image_tag url_for(@user.profile_picture), class: 'profile-picture' if @user.profile_picture.attached? %>
        </div>
        <div class="d-flex justify-content-center mt-2">
          <h3 class="user-info mr-2 mt-2"><%= @user.username %></h3>
          <% if current_user.present? && !current_user.guest? && current_user != @user && @user.present? %>
            <div class="d-flex align-items-center mb-3 pb-3 ml-3" >
              <% if current_user.following.include?(@user) %>
                <span><%= button_to "unfollow", unfollow_user_path(@user), method: :delete, class: 'follow-btn small-btn' %></span>
              <% else %>
                <span><%= button_to "Follow", follow_user_path(@user), method: :post, class: 'follow-btn small-btn' %></span>
              <% end %>
            </div>
          <% end %>
        </div>

    <div class="text-center">
        <h3 class="user-info"><%#= @user.username %></h3>
          <div class="follow-info">
            <p class="user-info"><%= link_to "フォロー: #{@user.following.count}", following_user_path(@user) %></p>
            <p class="user-info"><%= link_to "フォロワー: #{@user.followers.count}", followers_user_path(@user) %></p>
          </div>
        <%= render 'chats/info' %>

      <% if current_user == @user %>
        <%= link_to edit_user_path, class: 'user-info' do %>
          <i class="fas fa-user-edit fa-lg"></i>
        <% end %>
      <% end %>

      <p class="user-info">メールアドレス: <%= @user.email %></p>
      <p class="user-info">自己紹介: <%= @user.introduction %></p>
      <p class="user-info">場所: <%= @user.location %></p>
    </div>
  </div>

<div class="row">
  <% @posts.each do |post| %>
    <% unless post.user.is_deleted %>
      <div class="col-12 mb-2">
        <div class="post-container p-2">
          <div class="d-flex justify-content-between align-items-start">
            <div class="d-flex justify-content-start">
              <div class="post-tops">
                <%= link_to user_path(post.user) do %>
                  <p class="post-header"><%= post.user.username %></p>
                <% end %>

                <%= render 'posts/image_video', post: post %>
                <%= render 'posts/likes', post: post %>

                <% if current_user == post.user %>
                  <%= link_to edit_post_path(post.id), class: "icon-button btn btn-link" do %>
                    <i class="fas fa-edit"></i>
                  <% end %>
                  <%= link_to post_path(post.id), method: :delete, "data-confirm" => "本当に削除しますか？？", class: "icon-button btn btn-link" do %>
                    <i class="fas fa-trash"></i>
                  <% end %>
                <% end %>
                <div>
                  <%= post.created_at.strftime("%Y-%m-%d %H:%M") %>
                </div>
              </div>
              <div class="post-side ml-3">
                <p class="post-content"><%= post.content %></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>
</div>



</div>
  </div>
</div>
<!-- jQuery and Bootstrap Bundle (includes Popper) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', (event) => {
  let guestActions = document.querySelectorAll('.guest-action');
  guestActions.forEach((element) => {
    element.addEventListener('click', (event) => {
      event.preventDefault();
      alert('ゲストユーザーはこの操作はできません');
    });
  });
});

</script>

</body>